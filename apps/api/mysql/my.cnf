# =============================================================================
# MySQL Production Configuration for A la carte REST API
# =============================================================================
# Optimized for performance and security in containerized environment
# =============================================================================

[mysqld]
# Security Settings
bind-address = 0.0.0.0
skip-name-resolve
ssl-disabled

# Character Set (UTF-8 support for international data)
character-set-server = utf8mb4
collation-server = utf8mb4_unicode_ci

# Performance Tuning (adjust based on available memory)
innodb_buffer_pool_size = 256M
innodb_buffer_pool_instances = 1
innodb_flush_log_at_trx_commit = 2
innodb_log_file_size = 64M
innodb_log_buffer_size = 16M

# Query Cache (useful for read-heavy workloads like rating queries)
query_cache_type = 1
query_cache_size = 32M
query_cache_limit = 2M

# Connection Settings
max_connections = 100
max_user_connections = 95
connect_timeout = 10
wait_timeout = 600

# MyISAM Settings (for system tables)
key_buffer_size = 32M
table_open_cache = 512
sort_buffer_size = 2M
read_buffer_size = 1M
read_rnd_buffer_size = 4M

# Binary Logging (for replication/backup)
log-bin = mysql-bin
binlog_format = ROW
expire_logs_days = 3
max_binlog_size = 100M

# Error Logging
log-error = /var/log/mysql/error.log
log-warnings = 2

# Slow Query Logging (for performance monitoring)
slow_query_log = 1
slow_query_log_file = /var/log/mysql/slow.log
long_query_time = 2

[mysql]
default-character-set = utf8mb4

[client]
default-character-set = utf8mb4

# =============================================================================
# Configuration Notes:
# =============================================================================
# - Optimized for small to medium workloads (adjust buffer sizes for production)
# - UTF-8 support for international cheese names and user data
# - Query cache enabled for better read performance on rating queries
# - Binary logging for backup/replication capabilities
# - Reasonable connection limits to prevent resource exhaustion
# =============================================================================
