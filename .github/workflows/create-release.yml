name: Release with Versio

on:
  push:
    branches:
      - master

permissions:
  contents: write
  pull-requests: write

jobs:
  release:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
        with:
          fetch-depth: 0
          token: ${{ secrets.RELEASE_PLEASE_TOKEN }}

      - name: Setup Versio
        run: |
          curl -L https://github.com/chaaz/versio/releases/download/v0.8.5/versio__x86_64-unknown-linux-gnu -o versio
          chmod +x versio
          sudo mv versio /usr/local/bin/

      - name: Run Versio Release
        run: |
          versio release --yes

      - name: Show release outputs
        run: |
          echo "ðŸš€ Release completed!"
          echo "Tags created will trigger the build workflow"
